<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to causal mediation • mediator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to causal mediation">
<meta property="og:description" content="mediator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mediator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/mediator-intro.html">Introduction to causal mediation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../news/index.html">
    <span class="fa fa fa fa-newspaper-o fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/gerkelab/mediator">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://gerkelab.com">
    <span class="fa fa-flask fa-lg"></span>
     
    GerkeLab
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mediator-intro_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to causal mediation</h1>
            
            <h4 class="date">2020-06-25</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/gerkelab/mediator/blob/master/vignettes/mediator-intro.Rmd"><code>vignettes/mediator-intro.Rmd</code></a></small>
      <div class="hidden name"><code>mediator-intro.Rmd</code></div>

    </div>

    
    
<p>This vignette introduces <code>mediator</code> and provides an overview for mediation analysis under the counterfactual framework.</p>
<hr>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>In this vignette, we will use randomly generated data - <code>example250.rda</code>. The data is an extended version of the data provided in the SAS macro <code>%mediation</code>, with the same columns but 250 rows.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">mediation_example</span>)
<span class="co">#&gt;   x m_01          m y          c</span>
<span class="co">#&gt; 1 0    1 0.00965707 0  0.5529378</span>
<span class="co">#&gt; 2 0    1 0.30360478 0 -0.7385979</span>
<span class="co">#&gt; 3 0    1 0.51954681 0  1.1788648</span>
<span class="co">#&gt; 4 0    0 0.18600953 1  2.8974657</span>
<span class="co">#&gt; 5 0    0 0.12708356 0 -1.2719255</span>
<span class="co">#&gt; 6 0    0 0.12181193 0  1.9804641</span>

<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">mediation_example</span>)
<span class="co">#&gt; [1] 250   5</span></pre></body></html></div>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>In this vignette, we will :</p>
<ol style="list-style-type: decimal">
<li>review terminology associated with mediation analysis</li>
<li>look at the basic usage of <code>mediator</code>
</li>
<li>compare <code>mediator</code> to it’s SAS macro counterpart - <code>%mediation</code>
</li>
<li>provide the equations used to calculate various estimates</li>
</ol>
</div>
<div id="terminology-currently-taken-from-valeri-and-vanderweele" class="section level2">
<h2 class="hasAnchor">
<a href="#terminology-currently-taken-from-valeri-and-vanderweele" class="anchor"></a>Terminology – currently taken from Valeri and VanderWeele</h2>
<p><strong>Controlled Direct Effect (CDE)</strong> expresses how much the outcome would change on average if the mediator were controlled at level <em>m</em> uniformly in the population but the treatment were changed from level <em>a</em>=0 to level <em>a</em>=1.</p>
<p><strong>Natural Direct Effect (NDE)</strong> expresses how much the outcome would change if the exposure were set at level <em>a</em>=1 versus level <em>a</em>=0 but for each individual the mediatior were kept at the level it woud have taken in the absense of the exposure.</p>
<p><strong>Natural Indirect Effect (NIE)</strong> expresses how much the outcome would change on average if the exposure were controlled at level <em>a</em>=1, but the mediator were changed from the level if would take if <em>a</em>=0 to the level it would take if <em>a</em>=1.</p>
<p><strong>Total Effect</strong> how much the outcome would change overall for a change in the exposure from level <em>a</em>=0 to level <em>a</em>=1.</p>
<p><strong>Proportion Mediated</strong> the extent to which the total effect of the exposure on the outcome operates through the mediator.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>mediator</code> returns a data frame containing the point estimates and CIs for CDE, NDE, NIE and TE as well as the point estimates for the PM. The function assumes appropriate modeling (for the outcome and mediator models) on the part of the user and allows (but does not require) interaction between the exposure and the mediator. A basic example of function is shown below:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/mediator.html">mediator</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>,
         <span class="kw">out.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">y</span> ~ <span class="no">x</span>  + <span class="no">m</span> + <span class="no">c</span> + <span class="no">x</span>*<span class="no">m</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">med.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">m</span> ~ <span class="no">x</span> + <span class="no">c</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">treat</span> <span class="kw">=</span> <span class="st">"x"</span>,
         <span class="kw">a</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">a_star</span> <span class="kw">=</span> <span class="fl">0</span>,
         <span class="kw">m</span> <span class="kw">=</span> <span class="fl">0</span>,
         <span class="kw">boot_rep</span> <span class="kw">=</span> <span class="fl">0</span>)</pre></body></html></div>
<p>Setting <code>boot_rep = 0</code>, tells the function to use the Delta method for calculating confidence intervals. <code>a</code> and <code>a_star</code> represent the level of exposure and its comparison level, which for binary exposures are often 1 and 0, but can be set at any pair of numeric values. In the above example, <code>a</code>, <code>a_star</code>, <code>m</code> and <code>boot_rep</code> are all set to their default values.</p>
</div>
<div id="mediator-vs-mediation" class="section level2">
<h2 class="hasAnchor">
<a href="#mediator-vs-mediation" class="anchor"></a>mediator vs %mediation</h2>
<p><code>mediator</code> is related to the SAS/SPSS macros developed by Valeri and VanderWeele, <code>%mediation</code>, however minor differences exist between the programs which sometimes results in variation in estimates and confidence intervals.</p>
<p>When the macros calculate the CI using the delta method, they use the hard coded values 1.96 and -1.96 while <code>mediator</code> uses <code>c(-1,1)*qnorm(.975)</code>. Languages also differ with respect to rounding.</p>
<p>The <code>%mediation</code> takes roughly 7.05 seconds to run, calculating the CI using the delta method, and roughly 276.55 seconds using bootstrapping, while <code>mediator</code> takes 0.01 seconds for the delta method and 0.27 seconds for bootstrapping (using the <code>mediation_example.rda</code> dataset with 250 observations and 100 replicates).</p>
<p>When using bootstrapping, <code>%mediation</code> bootstraps both the effect estimates and CI, while the R function <code>mediator</code> only uses the bootstrap for obtaining the CI. Users should use the bootstrap function with caution, especially when using small datasets. We recommend using a minimum 10000 replicates. Using more replicates will take more time, however it will provide more precise estimates. This is especially important when using small datasets, as using a small number of replicated could make the CI wonky.</p>
<p>Below are examples of results from <code>mediator</code> (left) and <code>%mediation</code> (right) for comparison.</p>
<div id="continuous-outcome-and-mediator" class="section level4">
<h4 class="hasAnchor">
<a href="#continuous-outcome-and-mediator" class="anchor"></a>Continuous outcome and mediator</h4>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/mediator.html">mediator</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>,
         <span class="kw">out.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">c</span> ~ <span class="no">x</span> + <span class="no">m</span> + <span class="no">x</span>*<span class="no">m</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">med.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">m</span> ~ <span class="no">x</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">treat</span> <span class="kw">=</span> <span class="st">"x"</span>)</pre></body></html></div>
<pre class="sas"><code>%mediation(data = mediation_example, yvar = c, avar = x, mvar = m, cvar = , a0 = 0, a1 = 1, m = 0, yreg = linear, mreg = linear, interaction = true, casecontrol =, output =, c =, boot =, cens=);
run;</code></pre>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">-0.176</td>
<td align="left">-0.517</td>
<td align="left">0.165</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.014</td>
<td align="left">-0.252</td>
<td align="left">0.281</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">-0.014</td>
<td align="left">-0.151</td>
<td align="left">0.123</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.001</td>
<td align="left">-0.258</td>
<td align="left">0.26</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">-21.708</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">-0.176</td>
<td align="left">-0.517</td>
<td align="left">0.165</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.014</td>
<td align="left">-0.252</td>
<td align="left">0.281</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">-0.014</td>
<td align="left">-0.113</td>
<td align="left">0.085</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.001</td>
<td align="left">-0.258</td>
<td align="left">0.26</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">-21.7</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
</div>
<div id="binary-outcome-and-mediator" class="section level4">
<h4 class="hasAnchor">
<a href="#binary-outcome-and-mediator" class="anchor"></a>Binary outcome and mediator</h4>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/mediator.html">mediator</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>,
         <span class="kw">out.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">y</span> ~ <span class="no">x</span> + <span class="no">m_01</span> + <span class="no">c</span> + <span class="no">x</span>*<span class="no">m_01</span>,
                         <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="st">"binomial"</span>),
         <span class="kw">med.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">m_01</span> ~ <span class="no">x</span> + <span class="no">c</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="st">"binomial"</span>),
         <span class="kw">treat</span> <span class="kw">=</span> <span class="st">"x"</span>)</pre></body></html></div>
<pre class="sas"><code>%mediation(data = mediation_example, yvar = y, avar = x, mvar = m_01, cvar = c, a0 = 0, a1 = 1, m = 0, yreg = logistic, mreg = logistic, interaction = true, casecontrol=,output=,c=,boot=,cens=);
run;</code></pre>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">0.279</td>
<td align="left">0.058</td>
<td align="left">1.342</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.517</td>
<td align="left">0.225</td>
<td align="left">1.186</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">1.049</td>
<td align="left">0.905</td>
<td align="left">1.216</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.542</td>
<td align="left">0.235</td>
<td align="left">1.253</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">-0.055</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">0.279</td>
<td align="left">0.058</td>
<td align="left">1.342</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.517</td>
<td align="left">0.225</td>
<td align="left">1.186</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">1.049</td>
<td align="left">0.905</td>
<td align="left">1.216</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.542</td>
<td align="left">0.235</td>
<td align="left">1.253</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">-0.055</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
</div>
<div id="continous-outcome-and-binary-mediator" class="section level4">
<h4 class="hasAnchor">
<a href="#continous-outcome-and-binary-mediator" class="anchor"></a>Continous outcome and binary mediator</h4>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/mediator.html">mediator</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>,
         <span class="kw">out.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">c</span> ~ <span class="no">x</span> + <span class="no">m_01</span> + <span class="no">x</span>*<span class="no">m_01</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">med.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">m_01</span> ~ <span class="no">x</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="st">"binomial"</span>),
         <span class="kw">treat</span> <span class="kw">=</span> <span class="st">"x"</span>)</pre></body></html></div>
<pre class="sas"><code>%mediation(data = mediation_example, yvar = c, avar = x, mvar = m_01, cvar = , a0 = 0, a1 = 1, m = 0, yreg = linear, mreg = logistic, interaction = true, casecontrol=, output=, c=, boot=, cens=);
run;</code></pre>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">0.018</td>
<td align="left">-0.35</td>
<td align="left">0.386</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0</td>
<td align="left">-0.283</td>
<td align="left">0.284</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">0</td>
<td align="left">-0.017</td>
<td align="left">0.017</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.001</td>
<td align="left">-0.257</td>
<td align="left">0.258</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">0.598</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">0.018</td>
<td align="left">-0.35</td>
<td align="left">0.386</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0</td>
<td align="left">-0.257</td>
<td align="left">0.258</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">0</td>
<td align="left">-0.017</td>
<td align="left">0.017</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.001</td>
<td align="left">-0.257</td>
<td align="left">0.258</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">0.598</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
</div>
<div id="binary-outcome-and-continuous-mediator" class="section level4">
<h4 class="hasAnchor">
<a href="#binary-outcome-and-continuous-mediator" class="anchor"></a>Binary outcome and continuous mediator</h4>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/mediator.html">mediator</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>,
         <span class="kw">out.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">y</span> ~ <span class="no">x</span> + <span class="no">m</span> + <span class="no">c</span> + <span class="no">x</span>*<span class="no">m</span>,
                         <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>, <span class="kw">family</span> <span class="kw">=</span> <span class="st">"binomial"</span>),
         <span class="kw">med.model</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(<span class="no">m</span> ~ <span class="no">x</span> + <span class="no">c</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">mediation_example</span>),
         <span class="kw">treat</span> <span class="kw">=</span> <span class="st">"x"</span>)</pre></body></html></div>
<pre class="sas"><code>%mediation(data = mediation_example, yvar = y, avar = x, mvar = y, cvar = c, a0 = 0, a1 = 1, m = 0, yreg = logistic, mreg = linear, interaction = true, casecontrol=, output=, c=, boot=, cens=);
run;</code></pre>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">1.005</td>
<td align="left">0.314</td>
<td align="left">3.222</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.62</td>
<td align="left">0.224</td>
<td align="left">1.716</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">0.803</td>
<td align="left">0.506</td>
<td align="left">1.274</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.498</td>
<td align="left">0.103</td>
<td align="left">2.403</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">0.244</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">Effect</th>
<th align="left">Estimate</th>
<th align="left">Lower 95% CI</th>
<th align="left">Upper 95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CDE</td>
<td align="left">1.005</td>
<td align="left">0.314</td>
<td align="left">3.221</td>
</tr>
<tr class="even">
<td align="left">NDE</td>
<td align="left">0.62</td>
<td align="left">0.224</td>
<td align="left">1.715</td>
</tr>
<tr class="odd">
<td align="left">NIE</td>
<td align="left">0.803</td>
<td align="left">0.506</td>
<td align="left">1.274</td>
</tr>
<tr class="even">
<td align="left">Total Effect</td>
<td align="left">0.498</td>
<td align="left">0.207</td>
<td align="left">1.2</td>
</tr>
<tr class="odd">
<td align="left">Proportion Mediated</td>
<td align="left">0.244</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
</div>
</div>
<div id="equations" class="section level2">
<h2 class="hasAnchor">
<a href="#equations" class="anchor"></a>Equations</h2>
<div id="continuous-outcome-and-mediator-1" class="section level4">
<h4 class="hasAnchor">
<a href="#continuous-outcome-and-mediator-1" class="anchor"></a>Continuous outcome and mediator</h4>
<center>
<p>Models for Y (outcome) and M (mediator), correctly specified</p>
<p><span class="math display">\[ E[Y|a,m,c] = \theta_{0} + \theta_{1}a + \theta_{2}m + \theta_{3}am + \theta'_{4}c \]</span></p>
<p><span class="math display">\[ E[M|a,c] = \beta_{0} + \beta_{1}a + \beta'_{2}c \]</span></p>
<p>Average controlled direct effect, natural direct effect and natural indirect effect</p>
<p><span class="math display">\[ E[Y_{am} - Y_{a*m} | c] = (\theta_{1} + \theta_{3}m)(a-a^{*}) \]</span></p>
<p><span class="math display">\[ E[Y_{aM_{a^{*}}} - Y_{a^{*}M_{a^{*}}} | c] = \{\theta_{1} + \theta_{3}(\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c)\}(a-a^{*})\]</span></p>
<p><span class="math display">\[ E[Y_{aM_{a}} - Y_{aM_{a^{*}}} | c] = (\theta_{2}\beta_{1} + \theta_{3}\beta_{1}a)(a-a^{*})\]</span></p>
</center>
</div>
<div id="binary-outcome-and-continuous-mediator-1" class="section level4">
<h4 class="hasAnchor">
<a href="#binary-outcome-and-continuous-mediator-1" class="anchor"></a>Binary outcome and continuous mediator</h4>
<center>
<p>Models for Y (outcome) and M (mediator), correctly specified</p>
<p><span class="math display">\[ logit\{P(Y=1|a,m,c)\} = \theta_{0} + \theta_{1}a + \theta_{2}m + \theta_{3}am + \theta'_{4}c\]</span></p>
<p><span class="math display">\[ E[M|a,c] = \beta_{0} + \beta_{1}a + \beta'_{2}c \]</span></p>
<p>Controlled direct effect, natural direct effect and natural indiect effect on the odds ratio scale</p>
<p><span class="math display">\[ OR^{CDE}(m) = exp[(\theta_{1} + \theta_{3}m)(a-a^{*})] \]</span></p>
<p><span class="math display">\[ OR^{NDE} = exp\{(\theta_{1} + \theta_{3}\beta_{0} + \theta_{3}\beta_{1}a^{*} + \theta_{3}\beta'_{2}C + \theta_{3}\theta_{2}\sigma^{2})(a-a^{2})\}\]</span></p>
<p><span class="math display">\[ OR^{NIE} = exp\{(\theta_{2}\beta_{1} + \theta_{3}\beta_{1}a)(a-a^{*})\}\]</span></p>
</center>
</div>
<div id="continuous-outcome-and-binary-mediator" class="section level4">
<h4 class="hasAnchor">
<a href="#continuous-outcome-and-binary-mediator" class="anchor"></a>Continuous outcome and binary mediator</h4>
<center>
<p>Models for Y (outcome) and M (mediator), correctly specified</p>
<p><span class="math display">\[ E[Y|a,m,c] = \theta_{0} + \theta_{1}a + \theta_{2}m + \theta_{3}am + \theta'_{4}c \]</span></p>
<p><span class="math display">\[ logit\{P(M = 1|a,c)\} = \beta_{0} + \beta_{1}a + \beta'_{2}c\]</span></p>
<p>Average controlled direct effect, natural direct effect and natural indirect effect</p>
<p><span class="math display">\[ E[Y_{am} - Y_{a*m} | c] = (\theta_{1} + \theta_{3}m)(a-a^{*}) \]</span></p>
<p><span class="math display">\[ E[Y_{aM_{a^{*}}} - Y_{a^{*}M_{a^{*}}} | c] = \{\theta_{1}(a-a^{*})\} + \{\theta_{3}(a-a^{*})\} \frac{exp[\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c]}{1+exp[\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c]}\]</span></p>
<p><span class="math display">\[ E[Y_{aM_{a}} - Y_{aM_{a^{*}}}|c] = (\theta_{2} + \theta_{3}a)\{\frac{exp[\beta_{0} + \beta_{1}a + \beta'_{2}c]}{1+exp[\beta_{0} + \beta_{1}a + \beta'_{2}c]} - \frac{exp[\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c]}{1+exp[\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c]}\}\]</span></p>
</center>
</div>
<div id="binary-outcome-and-mediator-1" class="section level4">
<h4 class="hasAnchor">
<a href="#binary-outcome-and-mediator-1" class="anchor"></a>Binary outcome and mediator</h4>
<center>
<p>Models for Y (outcome) and M (mediator), correctly specified</p>
<p><span class="math display">\[ logit\{P(Y=1|a,m,c)\} = \theta_{0} + \theta_{1}a + \theta_{2}m + \theta_{3}am + \theta'_{4}c\]</span></p>
<p><span class="math display">\[ logit\{P(M = 1|a,c)\} = \beta_{0} + \beta_{1}a + \beta'_{2}c\]</span></p>
<p>Controlled direct effect, natural direct effect and natural indiect effect on the odds ratio scale</p>
<p><span class="math display">\[ OR^{CDE}(m) = exp[(\theta_{1} + \theta_{3}m)(a-a^{*})]\]</span></p>
<p><span class="math display">\[ OR^{NDE} = \frac{exp(\theta_{1}a)\{1+exp(\theta_{2} + \theta_{3}a + \beta_{0} + \beta_{1}a^{*} + \beta'_{2}c)\}}{exp(\theta_{1}a^{*})\{1+exp(\theta_{2} + \theta_{3}a^{*} + \beta_{0} + \beta_{1}a^{*} + \beta'_{2}c)\}}\]</span></p>
<p><span class="math display">\[ OR^{NIE} = \frac{\{1 + exp(\beta_{0} + \beta_{1}a^{*} + \beta'_{2}c)\}\{1 + exp(\theta_{2} + \theta_{3}a + \beta_{0} + \beta_{1}a + \beta'_{2}c)\}}{\{1 + exp(\beta_{0} + \beta_{1}a + \beta'_{2}c)\}\{1 + exp(\theta_{2} + \theta_{3}a + \beta_{0} + \beta_{1}a^{*} + \beta'_{2}c)\}}\]</span></p>
</center>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jordan Creed, <a href="https://travisgerke.com">Travis Gerke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
